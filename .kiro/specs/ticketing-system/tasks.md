# 演出票务系统实施任务列表（更新版）

## 说明

本任务列表基于更新后的需求文档，按照实施顺序组织任务。每个任务都标注了对应的需求编号。

**任务标记说明**:
- `[ ]` 未开始
- `[-]` 进行中  
- `[x]` 已完成
- `[]*` 可选任务（如测试相关）

---

## 阶段一：项目初始化和基础设施

### 1. 搭建项目基础架构

- [ ] 1.1 创建Maven多模块项目结构
  - 创建父POM和各微服务模块
  - 配置Spring Boot和Spring Cloud Alibaba依赖
  - 创建common公共模块
  - _需求: 24.1_

- [ ] 1.2 配置Nacos服务注册与配置中心
  - 部署Nacos服务器
  - 配置各微服务连接Nacos
  - 创建各服务的配置文件
  - _需求: 24.1_

- [ ] 1.3 搭建API网关服务
  - 创建gateway模块
  - 配置Spring Cloud Gateway路由规则
  - 实现统一认证过滤器
  - 配置跨域和限流规则
  - _需求: 24.1_

- [ ] 1.4 配置数据库和Redis
  - 设计并创建MySQL数据库表结构（场次表和场馆表包含city_id字段）
  - 项目表通过场次关联城市，支持多城市巡演
  - 配置MyBatis-Plus
  - 配置Redis连接池
  - 实现Redis工具类
  - _需求: 1.4, 1.7, 24.1_

---

## 阶段二：用户服务开发

### 2. 实现用户注册和登录功能

- [ ] 2.1 创建用户实体和数据访问层
  - 创建User、RealNameInfo、Address实体类
  - 创建对应的Mapper接口
  - 编写基础CRUD SQL
  - _需求: 9.1, 9.6, 9.7_

- [ ] 2.2 实现JWT认证机制
  - 创建JWT工具类
  - 实现Spring Security配置
  - 创建认证过滤器
  - 实现Token存储到Redis
  - _需求: 9.1, 10.1_

- [ ] 2.3 实现用户注册和登录接口
  - 实现手机号注册逻辑
  - 集成短信验证码服务
  - 实现密码加密存储
  - 实现手机号密码登录
  - 实现验证码登录
  - _需求: 9.1_

- [ ] 2.4 实现第三方登录
  - 集成微信登录SDK
  - 集成支付宝登录SDK
  - 实现OAuth2授权流程
  - _需求: 9.1_

- [ ] 2.5 实现用户信息管理
  - 实现获取用户信息接口
  - 实现更新用户信息接口
  - 实现密码修改功能
  - _需求: 9.1_

- [ ] 2.6 实现收货地址管理
  - 实现地址列表查询接口
  - 实现添加、编辑、删除地址接口
  - 实现设置默认地址功能
  - _需求: 9.6_

- [ ] 2.7 实现实名信息管理
  - 实现实名信息列表查询接口
  - 实现添加、编辑、删除实名信息接口
  - 实现身份证号加密存储
  - 实现设置默认实名信息功能
  - _需求: 9.7_

---

## 阶段三：城市和基础数据服务

### 3. 实现城市管理功能

- [ ] 3.1 创建城市相关实体和数据访问层
  - 创建City实体类
  - 创建CityMapper接口
  - 编写城市查询SQL
  - _需求: 1.1, 18.1_

- [ ] 3.2 实现城市查询接口（C端）
  - 实现城市列表查询接口（包含当前城市、定位城市、所有城市）
  - 实现按首字母分组查询
  - 实现热门城市查询
  - _需求: 1.1, 1.2, 1.3_

- [ ] 3.3 实现城市管理接口（运营后台）
  - 实现城市列表查询接口
  - 实现添加城市接口
  - 实现编辑城市接口
  - 实现删除城市接口
  - 实现设置城市排序接口
  - 实现设置热门城市接口
  - _需求: 18.1, 18.2, 18.3, 18.4_

- [ ] 3.4 实现类目管理功能（运营后台）
  - 创建Category实体类
  - 实现类目列表查询接口
  - 实现添加、编辑、删除类目接口
  - 实现设置类目图标和排序接口
  - _需求: 19.1, 19.2, 19.3, 19.4_

---

## 阶段四：项目服务开发

### 4. 实现演出项目管理功能

- [ ] 4.1 创建项目相关实体和数据访问层
  - 创建Event、Session、TicketTier、Seat、Venue、SeatMap实体类
  - Event实体不包含city_id（支持多城市巡演）
  - Session实体包含city_id（场次关联城市）
  - Venue实体包含city_id（场馆属于城市）
  - 创建对应的Mapper接口
  - 编写基础CRUD SQL和按城市筛选的查询SQL
  - _需求: 1.4, 1.7, 4.1, 5.1, 12.1_


- [ ] 4.2 实现项目列表和详情查询（C端）
  - 实现项目列表接口（通过场次的city_id筛选城市演出）
  - 支持分页、筛选、排序
  - 实现项目详情接口
  - 实现场次列表查询接口（按城市筛选）
  - 实现票档列表查询接口
  - _需求: 1.5, 1.7, 3.1, 3.6, 3.7, 3.8, 4.1, 4.2, 4.3, 4.6, 4.7_

- [ ] 4.3 实现项目管理功能（B端）
  - 实现项目列表查询接口（按merchant_id隔离商家数据）
  - 支持搜索功能
  - 实现新建项目接口（支持项目模板）
  - 实现项目编辑接口
  - 实现项目状态管理
  - 展示项目覆盖的城市列表
  - _需求: 10.3, 10.4, 12.1, 12.2, 12.3, 12.4, 12.5_

- [ ] 4.4 实现场次管理功能（B端）
  - 实现场次列表查询接口
  - 实现添加场次接口（必须选择城市和场馆）
  - 实现编辑场次接口
  - 实现删除场次接口
  - 支持同一项目在多个城市创建场次
  - _需求: 1.7, 12.6_

- [ ] 4.5 实现票档管理功能（B端）
  - 实现票档列表查询接口
  - 实现添加票档接口
  - 实现编辑票档接口
  - 实现票档与座位区域关联
  - _需求: 12.7_

- [ ] 4.6 实现售票规则管理（B端）
  - 实现售票规则配置接口
  - 实现限购规则设置
  - 实现售卖时间设置
  - _需求: 12.8_

- [ ] 4.7 实现场馆和座位图管理
  - 实现场馆列表和详情接口（按城市过滤）
  - 实现座位图上传和配置接口
  - 实现座位图查询接口
  - _需求: 4.4, 12.9, 23.1, 23.2, 23.3, 23.4, 23.5_

---

## 阶段五：搜索服务开发

### 5. 实现搜索功能

- [ ] 5.1 配置Elasticsearch
  - 部署Elasticsearch集群
  - 创建项目索引mapping（包含city_id字段）
  - 配置中文分词器（IK Analyzer）
  - _需求: 2.1.2_

- [ ] 5.2 实现数据同步到Elasticsearch
  - 实现项目数据同步到ES的逻辑
  - 监听项目数据变更
  - 实现增量同步和全量同步
  - _需求: 2.1.2_

- [ ] 5.3 实现搜索页面接口
  - 实现全文搜索接口（项目名称、艺人、场馆）
  - 实现搜索建议（自动补全）
  - 实现搜索历史记录存储和查询
  - 实现热门搜索词统计和查询
  - 实现按城市过滤搜索结果
  - _需求: 2.1.2, 2.1.3, 2.1.4, 2.1.5, 2.1.9_

- [ ] 5.4 实现搜索结果列表
  - 实现搜索结果列表接口
  - 支持分页加载
  - 返回项目完整信息
  - _需求: 2.1.6, 2.1.7_

---

## 阶段六：库存服务开发

### 6. 实现库存管理和防超卖机制

- [ ] 6.1 实现库存数据模型和缓存
  - 设计库存数据结构（数据库+Redis）
  - 实现库存初始化功能
  - 实现库存缓存预热（按城市维度分片存储）
  - 缓存key设计：inventory:{city_id}:{ticket_tier_id}
  - _需求: 5.5, 12.9_

- [ ] 6.2 实现库存锁定和释放
  - 实现Redis Lua脚本原子性库存扣减
  - 实现库存锁定接口（15分钟TTL）
  - 实现库存释放接口
  - 实现库存确认扣减接口
  - 实现定时任务清理过期锁定
  - _需求: 5.6, 6.3, 6.5_

- [ ] 6.3 实现座位分配和锁定
  - 实现随机座位分配算法
  - 实现座位锁定接口（5分钟TTL）
  - 实现座位释放接口
  - 实现座位状态查询接口
  - _需求: 6.1, 6.2, 6.3, 6.4, 6.5_

- [ ] 6.4 实现分布式锁防超卖
  - 实现Redis分布式锁工具类
  - 在库存扣减时使用分布式锁
  - 实现锁超时和重试机制
  - _需求: 5.6, 6.5_

- [ ] 6.5 实现库存管理功能（B端）
  - 实现库存查询接口
  - 实现手动调整库存接口
  - 实现库存预警功能
  - _需求: 12.9_

---

## 阶段七：订单服务开发

### 7. 实现订单创建和管理功能

- [ ] 7.1 创建订单相关实体和数据访问层
  - 创建Order、OrderItem、Refund实体类
  - 创建对应的Mapper接口
  - 编写订单查询SQL
  - _需求: 7.1, 7.2, 8.1, 9.2, 9.3_

- [ ] 7.2 实现订单创建流程
  - 实现订单创建接口
  - 调用库存服务锁定库存/座位
  - 保存订单和订单项到数据库
  - 设置订单15分钟超时
  - _需求: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6, 7.7, 7.8_

- [ ] 7.3 实现订单查询功能
  - 实现订单列表查询接口（支持状态筛选、分页）
  - 实现订单详情查询接口
  - 实现订单统计接口
  - _需求: 9.2, 9.3_

- [ ] 7.4 实现订单取消功能
  - 实现订单取消接口
  - 调用库存服务释放库存
  - 更新订单状态
  - _需求: 7.8_

- [ ] 7.5 实现订单超时处理
  - 实现定时任务扫描超时未支付订单
  - 自动取消超时订单
  - 释放锁定的库存
  - _需求: 7.8, 8.1_

- [ ] 7.6 实现电子票生成
  - 实现电子票生成逻辑
  - 实现二维码生成功能
  - 实现电子票查询接口
  - _需求: 8.4, 8.5, 9.4, 14.4_

- [ ] 7.7 实现退款管理功能
  - 实现退款申请接口
  - 实现退款审核接口（B端）
  - 实现退款处理流程
  - 更新订单状态
  - _需求: 14.3_

- [ ] 7.8 实现订单管理功能（B端）
  - 实现订单列表查询接口（商家维度）
  - 实现订单详情查询接口
  - 实现订单导出功能
  - 实现手动重新发送电子票功能
  - _需求: 14.1, 14.2, 14.4_

---

## 阶段八：支付服务开发

### 8. 实现支付功能

- [ ] 8.1 创建支付相关实体和数据访问层
  - 创建Payment实体类
  - 创建PaymentMapper接口
  - 编写支付记录查询SQL
  - _需求: 7.8, 8.1_

- [ ] 8.2 集成支付宝支付
  - 集成支付宝SDK
  - 实现支付宝支付接口
  - 实现支付宝支付回调处理
  - 实现签名验证
  - _需求: 7.8, 8.1_

- [ ] 8.3 集成微信支付
  - 集成微信支付SDK
  - 实现微信支付接口
  - 实现微信支付回调处理
  - 实现签名验证
  - _需求: 7.8, 8.1_

- [ ] 8.4 实现支付流程
  - 实现创建支付订单接口
  - 实现支付状态查询接口
  - 实现支付回调幂等性处理
  - 支付成功后更新订单状态
  - 支付成功后触发电子票生成
  - _需求: 7.8, 8.1, 8.2, 8.3, 8.4, 8.5_

- [ ] 8.5 实现退款功能
  - 实现退款接口
  - 调用第三方支付退款API
  - 处理退款回调
  - 更新退款状态
  - _需求: 14.3_

---

## 阶段九：营销服务开发

### 9. 实现营销和优惠券功能

- [ ] 9.1 创建营销相关实体和数据访问层
  - 创建Coupon、UserCoupon实体类
  - 创建对应的Mapper接口
  - 编写优惠券查询SQL
  - _需求: 9.5_

- [ ] 9.2 实现优惠券管理功能（运营后台）
  - 实现优惠券列表查询接口
  - 实现创建优惠券接口
  - 实现优惠券编辑和删除接口
  - 实现优惠券使用统计
  - _需求: 20.1, 20.2, 20.3_

- [ ] 9.3 实现优惠券发放功能
  - 实现批量发放优惠券接口
  - 实现生成优惠券领取链接
  - _需求: 20.2_

- [ ] 9.4 实现优惠券领取和使用（C端）
  - 实现可领取优惠券列表接口
  - 实现领取优惠券接口
  - 实现用户优惠券列表接口
  - 实现订单中应用优惠券逻辑
  - _需求: 7.6, 9.5_

---

## 阶段十：通知服务开发

### 10. 实现通知功能

- [ ] 10.1 创建通知相关实体和数据访问层
  - 创建Notification实体类
  - 创建NotificationMapper接口
  - 编写通知查询SQL
  - _需求: 8.6, 9.8_

- [ ] 10.2 集成短信服务
  - 集成阿里云短信服务SDK
  - 实现发送验证码短信
  - 实现发送订单通知短信
  - 实现发送电子票短信
  - _需求: 2.3, 8.6, 14.4_

- [ ] 10.3 实现邮件通知
  - 配置邮件服务器
  - 实现发送电子票邮件
  - 实现发送订单详情邮件
  - _需求: 14.4_

- [ ] 10.4 实现消息队列异步发送
  - 使用RocketMQ实现异步消息发送
  - 实现消息重试机制
  - _需求: 8.6, 14.4_

---

## 阶段十一：运营后台功能开发

### 11. 实现运营后台功能

- [ ] 11.1 实现用户管理
  - 实现用户列表查询接口（支持分页、搜索）
  - 实现用户详情查看接口
  - 实现添加用户接口
  - 实现编辑用户接口
  - 实现删除用户接口（逻辑删除）
  - 实现用户状态管理接口（启用/禁用/冻结）
  - 实现用户订单查询接口
  - _需求: 16.1, 16.2, 16.3, 16.4, 16.5, 16.6, 16.7_

- [ ] 11.2 实现供应商管理
  - 实现供应商列表查询接口（支持分页、搜索）
  - 实现供应商详情查看接口
  - 实现添加供应商接口
  - 实现编辑供应商接口
  - 实现删除供应商接口（逻辑删除）
  - 实现供应商资质管理接口（上传/查看/审核）
  - 实现供应商状态管理接口（启用/禁用/待审核）
  - 实现供应商项目查询接口
  - _需求: 17.1, 17.2, 17.3, 17.4, 17.5, 17.6, 17.7, 17.8_

- [ ] 11.3 实现Banner和运营位管理
  - 实现Banner列表查询接口
  - 实现添加/编辑/删除Banner接口
  - 实现Banner图片上传接口
  - 实现运营位配置接口（简化版）
  - _需求: 20.1, 20.2, 20.3, 20.4, 20.5_

- [ ] 11.4 实现系统参数管理
  - 实现系统参数查询接口
  - 实现系统参数配置接口
  - 实现支付方式配置接口
  - _需求: 21.1, 21.2, 21.3, 21.4, 21.5_

---

## 阶段十二：B端商家后台功能开发

### 12. 实现B端商家后台功能

- [ ] 12.1 实现B端登录和权限控制
  - 实现B端登录接口
  - 实现权限验证中间件
  - 实现数据隔离（按供应商）
  - _需求: 10.1, 10.2, 10.3, 10.4_

- [ ] 12.2 实现首页看板
  - 实现核心数据统计接口
  - 实现项目统计接口
  - 实现待处理事项接口
  - 实现销售趋势数据接口
  - 实现热门项目排行接口
  - _需求: 11.1, 11.2, 11.3, 11.4, 11.5, 11.6_

- [ ] 12.3 实现后台售票功能
  - 实现后台售票接口（完整流程）
  - 实现购票人信息填写
  - 实现支付处理
  - 实现电子票生成和发送
  - _需求: 13.1, 13.2, 13.3, 13.4, 13.5_

- [ ] 12.4 实现结算管理
  - 实现账户余额查询接口
  - 实现结算列表查询接口
  - 实现结算明细查询接口
  - 实现结算申请接口
  - 实现提现记录查询接口
  - _需求: 15.1, 15.2, 15.3, 15.4, 15.5_

---

## 阶段十三：主办后台功能开发

### 13. 实现主办后台功能

- [ ] 13.1 实现数据大屏
  - 实现实时销售数据统计接口
  - 实现库存数据统计接口
  - 实现销售趋势数据接口
  - 实现数据自动刷新机制
  - _需求: 22.1, 22.2, 22.3, 22.4, 22.5_

- [ ] 13.2 实现座位详情
  - 实现座位详情查看接口
  - 实现座位状态查询接口
  - 实现按项目和场次查看座位接口
  - _需求: 23.1, 23.2, 23.3, 23.4, 23.5_

---

## 阶段十四：C端前端开发（uni-app）

### 14. 搭建C端uni-app项目

- [ ] 14.1 初始化uni-app项目
  - 创建uni-app项目（Vue 3 + TypeScript）
  - 配置项目基础结构
  - 配置pages.json路由
  - 配置manifest.json应用信息
  - 配置uni.scss全局样式变量
  - _需求: 24.1, 24.2, 24.6, 24.7_

- [ ] 14.2 封装API请求和工具函数
  - 封装uni.request请求方法
  - 实现请求拦截器（添加Token）
  - 实现响应拦截器（统一错误处理）
  - 实现常用工具函数
  - _需求: 24.1_

- [ ] 14.3 配置Pinia状态管理
  - 配置Pinia
  - 创建user store（用户状态）
  - 创建city store（城市状态，实现数据联动）
  - 创建cart store（购物车状态）
  - _需求: 1.5, 1.6, 9.1_

- [ ] 14.4 实现路由拦截器
  - 实现路由拦截逻辑
  - 实现登录验证
  - 实现未登录跳转登录页
  - _需求: 9.1_

- [ ] 14.5 实现PC和移动端布局差异
  - 实现移动端底部导航组件
  - 实现PC端顶部导航组件
  - 实现响应式布局切换逻辑
  - _需求: 24.6, 24.7_

---

### 15. 实现C端城市功能

- [ ] 15.1 实现城市列表页
  - 创建城市列表页面UI
  - 展示当前城市、定位城市
  - 实现首字母快速锚点
  - 展示所有城市列表
  - 实现城市搜索功能
  - _需求: 1.1, 1.2, 1.3_

- [ ] 15.2 实现城市切换功能
  - 实现城市选择交互
  - 调用城市切换API
  - 保存城市到本地存储
  - 触发全局数据刷新
  - _需求: 1.5, 1.6_

- [ ] 15.3 实现城市定位功能
  - 调用定位API获取当前位置
  - 根据位置获取城市信息
  - 展示定位城市
  - _需求: 1.2_

---

### 16. 实现C端登录注册页面

- [ ] 16.1 实现登录页面
  - 创建登录页面UI
  - 实现手机号密码登录
  - 实现验证码登录
  - 实现登录表单验证
  - 保存Token到本地存储
  - _需求: 9.1_

- [ ] 16.2 实现注册页面
  - 创建注册页面UI
  - 实现注册表单验证
  - 实现发送验证码功能
  - 调用注册API
  - 注册成功后自动登录
  - _需求: 9.1_

- [ ] 16.3 实现第三方登录
  - 实现微信登录按钮
  - 实现支付宝登录按钮
  - 调用第三方登录API
  - _需求: 9.1_

---

### 17. 实现C端首页

- [ ] 17.1 实现首页布局和组件
  - 创建首页布局
  - 实现城市选择器组件
  - 实现搜索按钮组件
  - 实现Banner轮播组件（自动播放+手动切换）
  - 实现频道金刚位组件
  - 实现运营位组件（本周演出、必看演出）
  - _需求: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8, 2.9_

- [ ] 17.2 实现首页数据加载
  - 调用Banner列表API
  - 调用频道列表API
  - 调用运营位数据API
  - 实现下拉刷新
  - 根据选定城市过滤数据
  - _需求: 2.3, 2.4, 2.6, 2.9_

- [ ] 17.3 实现首页交互
  - 实现Banner点击跳转
  - 实现频道金刚位点击跳转
  - 实现搜索按钮点击跳转
  - _需求: 2.1, 2.3, 2.5_

---

### 18. 实现C端搜索页面

- [ ] 18.1 实现搜索页面布局
  - 创建搜索页面UI
  - 实现搜索输入框
  - 实现搜索历史记录展示
  - 实现热门搜索词展示
  - _需求: 2.1.1, 2.1.3, 2.1.4_

- [ ] 18.2 实现搜索功能
  - 实现搜索输入和搜索建议
  - 调用搜索API
  - 展示搜索结果列表
  - 实现搜索历史记录保存
  - 实现清空搜索历史
  - _需求: 2.1.2, 2.1.5, 2.1.6, 2.1.10_

- [ ] 18.3 实现搜索结果展示
  - 展示搜索结果列表（图片、名称、日期、时间、城市、剧院、价格）
  - 实现分页加载
  - 实现点击跳转到项目详情
  - 根据选定城市过滤结果
  - _需求: 2.1.7, 2.1.8, 2.1.9_

---

### 19. 实现C端频道列表页

- [ ] 19.1 实现列表页布局和筛选
  - 创建列表页布局
  - 实现顶部频道导航组件
  - 实现搜索按钮
  - 实现运营位展示
  - 实现筛选器组件（日期、价格）
  - 实现排序组件（热度）
  - _需求: 3.1, 3.2, 3.4, 3.6, 3.7_

- [ ] 19.2 实现项目列表展示
  - 创建项目卡片组件
  - 实现列表数据加载
  - 实现分页或无限滚动
  - 实现下拉刷新
  - 展示项目信息（图片、名称、日期、周几、时间、城市、剧院、价格）
  - 根据选定城市过滤数据
  - _需求: 3.5, 3.8, 3.9, 3.10_

- [ ] 19.3 实现列表页交互
  - 实现频道切换
  - 实现筛选和排序
  - 实现搜索按钮点击跳转
  - 实现项目卡片点击跳转
  - _需求: 3.1, 3.2, 3.3, 3.9_

---

### 20. 实现C端项目详情页

- [ ] 20.1 实现详情页基础信息展示
  - 创建详情页布局
  - 展示项目图片
  - 展示项目名称
  - 展示日期、周几、时间
  - 展示城市地点（可点击导航）
  - _需求: 4.1, 4.2, 4.3, 4.4_

- [ ] 20.2 实现详情内容展示
  - 展示项目详情图文介绍
  - 展示场次列表选择
  - 展示票档选择
  - 展示购票须知
  - 展示抢票攻略
  - _需求: 4.5, 4.6, 4.7, 4.8, 4.9_

- [ ] 20.3 实现互动功能
  - 实现分享按钮
  - 实现分享功能
  - _需求: 4.10_

- [ ] 20.4 实现地图导航
  - 实现地址点击跳转地图
  - 调用第三方地图应用
  - _需求: 4.4_

- [ ] 20.5 实现购票按钮
  - 实现底部固定购票按钮
  - 点击跳转到场次票档页
  - _需求: 4.11, 4.12_

---

### 21. 实现C端场次票档页

- [ ] 21.1 实现场次选择
  - 以日历模式展示场次列表
  - 实现场次选择交互
  - _需求: 5.1_

- [ ] 21.2 实现票档选择
  - 展示票档列表（价格、座位区域、库存状态）
  - 展示售罄状态
  - 实现票档选择和数量选择
  - _需求: 5.2, 5.3, 5.5_

- [ ] 21.3 实现缺货登记
  - 实现缺货登记功能
  - _需求: 5.4_

- [ ] 21.4 实现库存验证和购票
  - 选择票档时验证库存
  - 点击购票进入下一步
  - _需求: 5.6_

---

### 22. 实现C端订单确认页

- [ ] 22.1 实现订单信息展示
  - 展示项目基本信息
  - 展示场次票档基本信息
  - 展示座位信息（自动分配）
  - 展示价格明细
  - _需求: 6.2, 6.4, 7.1, 7.2, 7.6_

- [ ] 22.2 实现购票人信息填写
  - 实现购票人信息表单
  - 支持从已保存信息中选择
  - _需求: 7.3_

- [ ] 22.3 实现实名信息填写
  - 实现实名信息表单（如需要）
  - 支持从已保存信息中选择
  - _需求: 7.4_

- [ ] 22.4 实现配送方式选择
  - 实现配送方式选择
  - _需求: 7.5_

- [ ] 22.5 实现提交订单
  - 实现提交订单按钮
  - 验证必填信息
  - 调用创建订单API
  - 跳转到支付页
  - _需求: 7.7, 7.8_

---

### 23. 实现C端支付和订单完成页

- [ ] 23.1 实现支付页面
  - 展示订单金额和订单号
  - 展示支付方式选择
  - 调用支付API
  - 跳转到第三方支付页面
  - _需求: 7.8_

- [ ] 23.2 实现订单完成页
  - 展示支付成功状态
  - 展示订单号和购票信息
  - 提供查看订单详情入口
  - 提供查看电子票入口
  - 提供继续购票入口
  - _需求: 8.1, 8.2, 8.3, 8.4, 8.5, 8.6_

---

### 24. 实现C端个人中心

- [ ] 24.1 实现个人中心首页
  - 展示用户头像、昵称、手机号
  - 实现功能入口（订单、票夹、资产、地址、实名、客服）
  - _需求: 9.1_

- [ ] 24.2 实现账号信息管理
  - 实现修改头像功能
  - 实现修改昵称功能
  - 实现修改密码功能
  - _需求: 9.1_

- [ ] 24.3 实现订单列表页
  - 展示订单列表
  - 实现状态筛选
  - 展示订单基本信息
  - 点击跳转到订单详情
  - _需求: 9.2_

- [ ] 24.4 实现订单详情页
  - 展示订单完整信息
  - 提供申请退款入口
  - 提供查看电子票入口
  - _需求: 9.3_

- [ ] 24.5 实现票夹页面
  - 展示所有电子票
  - 展示电子票二维码
  - 展示项目、场次、座位信息
  - _需求: 9.4_

- [ ] 24.6 实现资产中心
  - 展示优惠券、积分
  - 区分可用、已使用、已过期优惠券
  - _需求: 9.5_

- [ ] 24.7 实现收货地址管理
  - 展示地址列表
  - 实现添加、编辑、删除地址
  - 实现设置默认地址
  - _需求: 9.6_

- [ ] 24.8 实现实名信息管理
  - 展示实名信息列表
  - 实现添加、编辑、删除实名信息
  - 实现设置默认实名信息
  - _需求: 9.7_

- [ ] 24.9 实现客服功能
  - 提供客服入口
  - 展示常见问题
  - 提供联系客服方式
  - _需求: 9.8_

- [ ] 24.10 实现想看列表
  - 展示收藏的项目列表
  - 实现取消收藏
  - _需求: 9.9_

---

## 阶段十五：B端管理后台前端开发（Vue 3 + Element Plus）

### 25. 搭建B端管理后台项目

- [ ] 25.1 初始化Vue 3项目
  - 创建Vue 3 + TypeScript + Vite项目
  - 配置Element Plus
  - 配置路由和状态管理
  - 配置Axios请求封装
  - _需求: 10.1, 11.1, 12.1, 13.1, 14.1, 15.1_

- [ ] 25.2 实现登录和权限管理
  - 实现登录页面
  - 实现权限验证
  - 实现菜单权限控制
  - 实现数据隔离（按供应商）
  - _需求: 10.1, 10.2, 10.3, 10.4_

- [ ] 25.3 实现主布局
  - 实现侧边栏菜单
  - 实现顶部导航栏
  - 实现面包屑导航
  - _需求: 10.1_

---

### 26. 实现B端首页看板

- [ ] 26.1 实现数据卡片
  - 展示核心数据（销售额、订单量等）
  - _需求: 11.1, 11.2_

- [ ] 26.2 实现图表展示
  - 实现销售趋势图表（使用ECharts）
  - 实现热门项目排行榜
  - _需求: 11.4, 11.5_

- [ ] 26.3 实现待处理事项
  - 展示待处理事项提醒
  - 提供快捷入口
  - _需求: 11.3, 11.6_

---

### 27. 实现B端项目管理

- [ ] 27.1 实现项目列表页
  - 展示项目列表（表格形式）
  - 实现搜索功能（按项目名称）
  - 实现筛选功能
  - 实现新建项目按钮
  - _需求: 12.1_

- [ ] 27.2 实现新建/编辑项目页
  - 实现项目基本信息表单
  - 实现图片上传
  - 实现富文本编辑器（详情、须知）
  - 实现项目模板选择
  - _需求: 12.2, 12.3, 12.4, 12.5_

- [ ] 27.3 实现项目详情页
  - 展示项目详情
  - 展示场次列表
  - 提供编辑入口
  - _需求: 12.2_

- [ ] 27.4 实现场次管理
  - 实现场次列表展示
  - 实现添加场次对话框
  - 实现编辑场次功能
  - 实现删除场次功能
  - _需求: 12.6_

- [ ] 27.5 实现票档管理
  - 实现票档列表展示
  - 实现添加票档对话框
  - 实现编辑票档功能
  - 实现票档与座位区域关联
  - _需求: 12.7_

- [ ] 27.6 实现售票规则配置
  - 实现售票规则表单
  - 配置限购、售卖时间等
  - _需求: 12.8_

- [ ] 27.7 实现库存管理
  - 展示库存统计
  - 实现手动调整库存
  - _需求: 12.9_

---

### 28. 实现B端后台售票

- [ ] 28.1 实现后台售票页面
  - 实现项目选择
  - 实现场次选择
  - 实现票档选择
  - 实现购票人信息填写
  - 实现支付方式选择
  - 实现提交售票
  - _需求: 13.1, 13.2, 13.3, 13.4_

- [ ] 28.2 实现电子票生成
  - 实现电子票生成
  - 实现电子票发送
  - _需求: 13.5_

---

### 29. 实现B端订单管理

- [ ] 29.1 实现订单列表页
  - 展示订单列表
  - 实现筛选和搜索
  - 实现订单导出
  - _需求: 14.1, 14.2_

- [ ] 29.2 实现订单详情页
  - 展示订单完整信息
  - 提供重新发送电子票功能
  - _需求: 14.2, 14.4_

- [ ] 29.3 实现退款管理
  - 展示退款申请列表
  - 实现退款审核（同意/拒绝）
  - _需求: 14.3_

---

### 30. 实现B端结算管理

- [ ] 30.1 实现结算列表页
  - 展示账户余额
  - 展示结算列表
  - 实现筛选
  - _需求: 15.1, 15.2_

- [ ] 30.2 实现结算明细页
  - 展示结算明细
  - 展示包含的订单
  - _需求: 15.3_

- [ ] 30.3 实现提现功能
  - 实现提现申请表单
  - 展示提现记录
  - _需求: 15.4, 15.5_

---

## 阶段十六：运营后台前端开发（Vue 3 + Element Plus）

### 31. 实现运营后台用户管理

- [ ] 31.1 实现用户列表页
  - 展示用户列表（表格形式）
  - 实现搜索功能（手机号、昵称）
  - 实现筛选功能（状态）
  - 实现分页
  - _需求: 16.1_

- [ ] 31.2 实现用户详情页
  - 展示用户基本信息
  - 展示用户订单记录
  - _需求: 16.2, 16.7_

- [ ] 31.3 实现用户增删改功能
  - 实现添加用户对话框
  - 实现编辑用户对话框
  - 实现删除用户确认
  - _需求: 16.3, 16.4, 16.5_

- [ ] 31.4 实现用户状态管理
  - 实现状态切换按钮（启用/禁用/冻结）
  - 实现状态切换确认对话框
  - _需求: 16.6_

---

### 32. 实现运营后台供应商管理

- [ ] 32.1 实现供应商列表页
  - 展示供应商列表（表格形式）
  - 实现搜索功能（商家名称、联系人）
  - 实现筛选功能（状态）
  - 实现分页
  - _需求: 17.1_

- [ ] 32.2 实现供应商详情页
  - 展示供应商基本信息
  - 展示供应商项目列表
  - 展示资质文件
  - _需求: 17.2, 17.8_

- [ ] 32.3 实现供应商增删改功能
  - 实现添加供应商对话框
  - 实现编辑供应商对话框
  - 实现删除供应商确认
  - _需求: 17.3, 17.4, 17.5_

- [ ] 32.4 实现供应商资质管理
  - 实现资质文件上传
  - 实现资质文件查看
  - 实现资质文件审核
  - _需求: 17.6_

- [ ] 32.5 实现供应商状态管理
  - 实现状态切换按钮（启用/禁用/待审核）
  - 实现状态切换确认对话框
  - _需求: 17.7_

---

### 33. 实现运营后台城市管理

- [ ] 33.1 实现城市列表页
  - 展示城市列表（表格形式）
  - 实现搜索功能
  - 实现排序功能
  - _需求: 18.1_

- [ ] 33.2 实现城市增删改功能
  - 实现添加城市对话框
  - 实现编辑城市对话框
  - 实现删除城市确认
  - 实现设置城市排序
  - 实现设置热门城市
  - _需求: 18.2, 18.3, 18.4_

---

### 34. 实现运营后台类目管理

- [ ] 34.1 实现类目列表页
  - 展示类目列表（表格形式）
  - 实现排序功能
  - _需求: 19.1_

- [ ] 34.2 实现类目增删改功能
  - 实现添加类目对话框
  - 实现编辑类目对话框
  - 实现删除类目确认
  - 实现类目图标上传
  - 实现设置类目排序
  - _需求: 19.2, 19.3, 19.4_

---

### 35. 实现运营后台Banner和运营位管理

- [ ] 35.1 实现Banner管理（简化版）
  - 展示Banner列表
  - 实现添加Banner对话框
  - 实现编辑Banner对话框
  - 实现删除Banner确认
  - 实现Banner图片上传
  - 实现设置跳转链接
  - _需求: 20.1, 20.2, 20.3_

- [ ] 35.2 实现运营位管理（简化版）
  - 展示运营位列表
  - 实现配置运营位对话框
  - 实现选择展示内容
  - _需求: 20.4, 20.5_

---

### 36. 实现运营后台系统参数管理

- [ ] 36.1 实现系统参数配置页面
  - 展示系统参数列表
  - 实现参数编辑表单
  - 实现保存配置
  - _需求: 21.1, 21.2, 21.3_

- [ ] 36.2 实现退票规则配置
  - 实现退票规则表单
  - _需求: 21.4_

- [ ] 36.3 实现支付方式配置
  - 展示支付方式列表
  - 实现启用/禁用支付方式
  - _需求: 21.5_

---

## 阶段十七：主办后台前端开发（Vue 3 + Element Plus）

### 37. 实现主办后台数据大屏

- [ ] 37.1 实现大屏布局
  - 实现全屏布局
  - 实现自适应大屏幕
  - _需求: 22.1_

- [ ] 37.2 实现数据展示组件
  - 实现实时销售数据卡片
  - 实现库存数据卡片
  - 实现销售趋势图表（ECharts）
  - _需求: 22.2, 22.3, 22.4_

- [ ] 37.3 实现数据自动刷新
  - 实现定时刷新机制
  - _需求: 22.5_

---

### 38. 实现主办后台座位详情

- [ ] 38.1 实现座位详情页面
  - 实现座位图可视化展示
  - 展示座位详细信息
  - 展示座位销售状态
  - 实现按项目和场次查看
  - _需求: 23.1, 23.2, 23.3, 23.4, 23.5_

---

## 阶段十八：系统集成和优化

### 39. 实现高并发优化

- [ ] 39.1 实现接口限流
  - 配置Sentinel限流规则
  - 实现令牌桶限流
  - 实现用户级别限流
  - _需求: 5.6, 6.5_

- [ ] 39.2 实现缓存优化
  - 实现热门项目缓存（按城市维度分片）
  - 缓存key设计：hot_events:{city_id}
  - 实现库存缓存（按城市+票档维度）
  - 实现缓存预热
  - 实现缓存更新策略
  - _需求: 1.5, 3.10, 5.6_

- [ ] 39.3 实现数据库优化
  - 配置读写分离
  - 实现订单表分表
  - 优化慢查询
  - 添加必要索引（场次表的city_id索引、merchant_id索引）
  - 添加组合索引（city_id + start_time）优化城市筛选查询
  - _需求: 9.2, 14.1_

---

### 40. 实现监控和日志

- [ ]* 40.1 配置日志收集
  - 配置ELK日志收集
  - 配置日志格式和级别
  - 实现关键业务日志记录
  - _需求: 24.1_

- [ ]* 40.2 配置链路追踪
  - 配置SkyWalking
  - 实现分布式链路追踪
  - _需求: 24.1_

- [ ]* 40.3 配置监控告警
  - 配置Prometheus监控
  - 配置Grafana可视化
  - 配置告警规则
  - _需求: 24.1_

---

### 41. 系统测试和部署

- [ ]* 41.1 编写单元测试
  - 编写核心业务逻辑单元测试
  - 目标覆盖率70%以上
  - _需求: 24.1_

- [ ]* 41.2 编写集成测试
  - 编写API接口集成测试
  - 编写数据库集成测试
  - _需求: 24.1_

- [ ] 41.3 配置CI/CD
  - 配置Jenkins/GitLab CI
  - 实现自动构建和测试
  - 实现自动部署到测试环境
  - _需求: 24.1_

- [ ] 41.4 部署到生产环境
  - 配置Kubernetes部署
  - 配置负载均衡
  - 配置数据库主从
  - 配置Redis集群
  - _需求: 24.1_

---

## 总结

本任务列表共包含 **41个主要任务模块**，涵盖：

### 后端服务（13个模块）
1. 项目初始化和基础设施
2. 用户服务
3. 城市和基础数据服务
4. 项目服务
5. 搜索服务
6. 库存服务
7. 订单服务
8. 支付服务
9. 营销服务
10. 通知服务
11. 运营后台功能
12. B端商家后台功能
13. 主办后台功能

### 前端应用（24个模块）
14-24. C端前端（uni-app）- 11个模块
25-30. B端管理后台（Vue 3）- 6个模块
31-36. 运营后台（Vue 3）- 6个模块
37-38. 主办后台（Vue 3）- 2个模块

### 系统优化（3个模块）
39. 高并发优化
40. 监控和日志
41. 系统测试和部署

**预估工作量**: 约 300-360 人天
**建议团队配置**: 全栈开发 6人 + 测试 1人
**预估开发周期**: 8-10个月

---

**文档版本**: v2.0  
**编制日期**: 2025-11-18  
**编制人**: Kiro AI Assistant  
**审核状态**: 待审核
